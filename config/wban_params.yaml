# ============================================================================
# WBAN/IoMT Optimization Configuration - TOPOLOGICAL MODEL
# ============================================================================
# Based on: "An Energy Aware Clustering Scheme for 5G-enabled Edge Computing based IoMT Framework"
# ============================================================================

# 1. PRZESTRZEŃ SYMULACJI (Szpital / Obszar IoMT)
space:
  dimensions: [500, 500]  # metry (500x500 m)
  base_station:
    position: [500, 500]  # Stacja bazowa w rogu (wg artykułu)

# 2. MODEL CIAŁA (Uproszczony - tylko granice obszaru)
body_model:
  zones:
    # Definiujemy jedną strefę "body" jako cały obszar roboczy
    # (Zachowujemy kompatybilność kodu, ale usuwamy restrykcje anatomiczne)
    body:
      x_range: [0.0, 1.0]
      y_range: [0.0, 1.0]
      description: "Obszar symulacji IoMT"
  
  torso_cylinder:
    # Wyłączamy wpływ ciała na propagację (w skali 500m jest pomijalny)
    center_x: -100
    center_y: -100
    radius: 0.0
    height_range: [0, 0]

# 3. TYPY SENSORÓW (Uproszczone - liczy się ilość danych)
sensor_types:
  Generic:
    zone: body
    data_rate: 1000  # bps
    packet_size: 4000 # bits (500 bajtów)
    priority: medium

# 4. SCENARIUSZE (Skalowalność)
scenarios:
  S1:
    name: "Small Scale (WBAN)"
    n_sensors: 10
    n_hubs: 1
    P_TX_max: 0.0
    sensor_config: # Lista generowana dynamicznie w kodzie lub powtórzona
      - {type: Generic, zone: body} # x10
  
  S2:
    name: "Medium Scale (Ward)"
    n_sensors: 50
    n_hubs: 3  # 3 klastry (Huby optymalizowane)
    P_TX_max: 0.0
    sensor_config:
      - {type: Generic, zone: body} # x50
  
  S3:
    name: "Large Scale (Hospital)"
    n_sensors: 100
    n_hubs: 5  # 5 klastrów
    P_TX_max: 0.0
    sensor_config:
      - {type: Generic, zone: body} # x100

  hub_placement:
    preferred_zone: body
    allow_optimization: true

# 5. MODEL ENERGETYCZNY (First Order Radio Model)
# Parametry z artykułu (sekcja Experimental results)
energy_model:
  E_elec_TX: 50.0e-9   # 50 nJ/bit
  E_elec_RX: 50.0e-9   # 50 nJ/bit
  E_amp_fs: 10.0e-12   # 10 pJ/bit/m^2 (Free Space)
  E_amp_mp: 0.0013e-12 # 0.0013 pJ/bit/m^4 (Multipath)
  E_da: 5.0e-9         # 5 nJ/bit/signal (Agregacja danych)
  E_init: 0.5          # 0.5 J (Energia początkowa)
  d_threshold: 87.0    # sqrt(E_fs/E_mp) = sqrt(10/0.0013) ~ 87.7 m

# 6. MODEL PROPAGACJI (Uproszczony dla skali makro)
propagation_model:
  frequency: 2.4e9
  LOS:  {path_loss_exponent: 2.0, shadowing_std: 0.0, PL_d0: 0} # Free space
  NLOS: {path_loss_exponent: 4.0, shadowing_std: 0.0, PL_d0: 0} # Multipath
  d0: 1.0
  receiver_sensitivity: -90.0
  link_margin: 0.0

# 7. FUNKCJA CELU (Czysta optymalizacja energetyczna)
fitness_function:
  weight_variants:
    balanced: # Jedyny wariant potrzebny teraz
      w_E: 1.0  # 100% wagi na energię całkowitą
      w_R: 0.0
      label: "Energy Optimization"

  penalties:
    zone_violation: 0.0      # WYŁĄCZONA KARA ŚMIERCI!
    overlap_distance: 0.01   # 1% obszaru (np. 5m w skali 500m)
    overlap_penalty: 1000.0  # Kara za kolizję (nakładanie się węzłów)
    link_margin_threshold: 0.0
    reliability_penalty_factor: 0.0

# 8. ALGORYTMY
optimization:
  GA:
    population_size: 50
    max_iterations: 100
    crossover: {type: "uniform", probability: 0.9}
    mutation: {type: "gaussian", probability: 0.1}
    selection: {type: "tournament", tournament_size: 3}
    elitism: {enabled: true, elite_count: 2}
  
  PSO:
    population_size: 50
    max_iterations: 100
    inertia_weight: 0.7
    cognitive_coefficient: 1.5
    social_coefficient: 1.5

# ... (reszta pliku wyżej) ...

experiments:
  main_experiment:
    scenarios: [S1, S2, S3]
    weight_variants: [balanced]
    algorithms: [GA, PSO]
    n_runs: 30 # Wystarczy 30 do statystyki

  power_analysis:
    scenario: S2              # Testujemy na średnim scenariuszu (50 sensorów)
    algorithm: PSO            # PSO jest szybsze/lepsze
    weight_variant: balanced
    P_TX_range: [-10.0, -5.0, 0.0, 5.0, 10.0] # Zakres mocy do przetestowania (dBm)
    n_runs: 30